{% extends 'base.html' %}
{% block content %}
<div class="page-breadcrumb">
  <div class="row align-items-center">
    <div class="col-md-6 col-8 align-self-center">
      <h3 class="page-title mb-0 p-0">Update Submission</h3>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{{ url_for('dash.index') }}">Home</a></li>
          <li class="breadcrumb-item"><a href="{{ url_for('dash.student_assignments') }}">My Submissions</a></li>
          <li class="breadcrumb-item active" aria-current="page">Update</li>
        </ol>
      </nav>
    </div>
  </div>
</div>

<div class="container-fluid">
  <div class="card">
    <div class="card-body">

      {% if error %}
        <p class="text-danger">{{ error }}</p>
      {% endif %}
      {% if success %}
        <p class="text-success">{{ success }}</p>
      {% endif %}

      <h5>{{ submission.assignment_name }}</h5>
      <p class="text-muted">Submitted: {{ submission.created_at.strftime('%Y-%m-%d') }}</p>

      <form method="POST" enctype="multipart/form-data">
        <div class="mb-3">
          <label class="form-label">Add files (optional)</label>
          <input type="file" name="assignment_files" multiple class="form-control">
        </div>

        <button class="btn btn-primary" type="submit">Upload Additional Files</button>
        <a class="btn btn-link" href="{{ url_for('dash.student_assignments') }}">Back</a>
      </form>

      <hr/>
      <h6>Existing files</h6>
      <ul>
        {% for f in submission.assignment_submisssion_file_uploads %}
          <li>{{ f.original_name }} <small class="text-muted">({{ f.filename }})</small></li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endblock %}
