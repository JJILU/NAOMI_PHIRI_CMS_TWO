{% extends 'base.html' %}
{% block content %}

<div class="page-breadcrumb">
  <div class="row align-items-center">
    <div class="col-6">
      <h3 class="page-title mb-0">Edit Study Material</h3>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{{ url_for('dash.index') }}">Home</a></li>
          <li class="breadcrumb-item"><a href="{{ url_for('dash.list_study_material') }}">Study Materials</a></li>
          <li class="breadcrumb-item active">Edit</li>
        </ol>
      </nav>
    </div>
  </div>
</div>

<div class="container-fluid">
  {% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}
  {% if success %}<div class="alert alert-success">{{ success }}</div>{% endif %}

  <div class="card">
    <div class="card-body">
      <form method="POST" enctype="multipart/form-data">
        <div class="mb-3">
          <label class="form-label">Title</label>
          <input type="text" name="title" class="form-control" value="{{ material.title }}" maxlength="90" required>
        </div>

        <div class="mb-3">
          <label class="form-label">Description</label>
          <textarea name="description" class="form-control" maxlength="200" rows="4" required>{{ material.description }}</textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">Classroom (optional)</label>
          <select name="classroom_id" class="form-select">
            <option value="">All Classes</option>
            {% for c in classrooms %}
              <option value="{{ c.id }}" {% if material.classroom_id == c.id %}selected{% endif %}>{{ c.classroom_name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Add Files (optional)</label>
          <input type="file" name="files" multiple class="form-control">
        </div>

        <button type="submit" class="btn btn-primary">Save Changes</button>
        <a href="{{ url_for('dash.view_study_material', id=material.id) }}" class="btn btn-secondary">Cancel</a>
      </form>
    </div>
  </div>
</div>

{% endblock %}
